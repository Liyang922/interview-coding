<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
    </head>
    <body>

        <script>
            var vnode = {
                tag: 'ul',
                props: {
                    class: 'list'
                },
                text: '',
                children: [
                    {
                        tag: "li",
                        props: {
                            class: "item"
                        },
                        text: '',
                        children: [
                            {
                                tag: undefined,
                                props: {},
                                text: '牛客网',
                                children: []
                            }
                        ]
                    },
                    {
                        tag: "li",
                        props: {},
                        text: '',
                        children: [
                            {
                                tag: undefined,
                                props: {},
                                text: 'nowcoder',
                                children: []
                            }
                        ]
                    }
                ]
            }
            const _createElm = vnode => {
                // 补全代码
                // 如果不提前声明，最后结果是只有一个文本节点nowcoder
                // 如果不提前声明，且在if和else中分别声明，return会提示reference error

                // 更有趣的写法
                // 用解构赋值，省去写对象+点操作符+属性的繁琐
                // 并且elem直接设置为vnode的属性vnode.elem
                // let { tag, props, children, text } = vnode

                let elem;
                if(typeof vnode.tag === "string") {
                    elem = document.createElement(vnode.tag);
                    _setAttr(elem, vnode.props);
                    elem.append(document.createTextNode(vnode.text))
                    for(let child of vnode.children) {
                        elem.append(_createElm(child));
                        console.log(elem);
                    }
                } else {
                    elem = document.createTextNode(vnode.text);
                }
                return elem;
            }

            const _setAttr = (elem, props) => {
                for(let attribute in props) {
                    elem.setAttribute(attribute, props[attribute])
                };
            }

            document.body.append(_createElm(vnode));


            if(true) {
                let a;
            } else {
                let a;
            }
            console.log(a); //Uncaught ReferenceError: a is not defined
            // if语句块内定义的变量当然只有语句块内才能使用！
            // 而上面之所以return一个值，是因为else块内没有使用let，从而定义了一个全局变量elem！
        </script>
    </body>
</html>