<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <style>
      a {
        color: #00bc9b;
      }
    </style>
  </head>
  <body>
    <div id="jsContainer">
      这里会给出一段随机文本，可能包含一些链接，比如https://www.baidu.com，或者
      www.baidu.com?from=onlineExam，如果出现链接文本，请给该链接文本加上链接标签，用户点击后能直接在新窗口中打开该链接。
    </div>
    <script>
      function link() {
        let jsContainer = document.querySelector("#jsContainer");
        let text = jsContainer.textContent;
        // 不能将第一个？换成选择|，因为会匹配成https:// 和www.baidu.com
        // console.log(text.match(/(https?:\/\/)?(www\.)[\w\.\?=]+/g));

        let newText = text.replace(/(https?:\/\/)?(www\.)[\w\.\?=]+/g, (...args) => {
            if(args[1]) {
                // 不设置target默认是原标签页打开
                return `<a target="_blank" href="${args[0]}">${args[0]}</a>`;
            } else {
                return `<a target="_blank" href="http://${args[0]}">${args[0]}</a>`;
            }
        });
        jsContainer.innerHTML = newText;
      }

      link();
    </script>
  </body>
</html>
